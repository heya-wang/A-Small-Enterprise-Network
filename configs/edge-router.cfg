! =====================================================
! Device: Edge-Router
! Role  : Internet Gateway + Firewall + NAT
! =====================================================
!
hostname Edge-Router
!
! -----------------------------------------------------
! Interface Configuration
! -----------------------------------------------------
!
interface GigabitEthernet0/0
 description TO_ISP
 ip address 203.0.1.2 255.255.255.252
 ip nat outside
 no shutdown
!
interface GigabitEthernet0/1
 description TO_DMZ_SWITCH
 ip address 192.168.10.1 255.255.255.240
 ip nat inside
 no shutdown
!
! -----------------------------------------------------
! Routing
! -----------------------------------------------------
!
ip route 0.0.0.0 0.0.0.0 203.0.1.1
ip route 192.168.0.0 255.255.255.0 192.168.10.2
!
! -----------------------------------------------------
! NAT Configuration (PAT Overload)
! -----------------------------------------------------
!
access-list 1 permit 192.168.0.0 0.0.0.255
ip nat inside source list 1 interface GigabitEthernet0/0 overload
!
! -----------------------------------------------------
! Firewall ACL - Internet to DMZ
! -----------------------------------------------------
!
ip access-list extended INET-TO-DMZ
 permit tcp any host 192.168.10.10 eq 80
 permit tcp any host 192.168.10.10 eq 443
 permit tcp any host 192.168.10.10 eq 25
 permit tcp any host 192.168.10.10 eq 110
 permit tcp any host 192.168.10.10 eq 143
 permit icmp any host 192.168.10.10 echo
 deny ip any any log
!
interface GigabitEthernet0/0
 ip access-group INET-TO-DMZ in
!
! -----------------------------------------------------
! Firewall ACL - Inside to Outside
! -----------------------------------------------------
!
ip access-list extended INSIDE-TO-INTERNET
 permit ip 192.168.0.0 0.0.0.255 any
 permit ip host 192.168.10.10 any
 deny ip any any log

interface GigabitEthernet0/1
 ip access-group INSIDE-TO-INTERNET in
!
! -----------------------------------------------------
! Management Security
! -----------------------------------------------------
!
ip domain-name jk.de
service password-encryption
!
username admin 15 secret admin
enable secret admin
!
crypto key generate rsa modulus 2048
ip ssh version 2
!
access-list 10 permit 192.168.0.6
!
line vty 0 4
 login local
 transport input ssh
 access-class 10 in
 exec-timeout 5 0
!
line console 0
 login local
 exec-timeout 5 0
!
end
write memory
!
